# PeyokaPeyokaBot

Музыкальный бот для голосовых каналов Discord. 

#### Установка

Создать файл settings.py, в него записать следующие строки:\
TOKEN = '<Токен вашего бота>'\
YOUTUBE_API_KEY = '<Ключ для доступа к сервисам YouTube>'

*токен бота берется отсюда: https://discord.com/developers/applications\
**ключ для YouTube берется отсюда: https://console.developers.google.com

Далее установить FFmpeg

Запустить, выполнив файл bot.py

#### Использование 

Все команды начинаются с ! (можно поменять, заменив переменную command_prefix в файле bot.py).

Как только пользователь, находящийся в голосовом канале, введет в текстовый канал команду !play <ссылка на видео или название>,
бот войдет в этот голосовой канал и начнет проигрывать запрошенный трек.
В случае, если пользователь введет команду неправильно, либо не зайдет в голосовой канал, команда проигнорируется.
Принимаются ссылки на треки, плейлисты и альбомы из сервиса Яндекс.Музыка, а так же видео и плейлисты из сервиса YouTube.

Для вывода в текстовый канал списка треков служит команда !list.
Для, того, чтобы пропустить играющий в данный момент трек, в чат надо ввести команду либо !skip, либо !next.
Если очередь пуста, бот выйдет из голосового канала.

Команды !pause и !resume служат для паузы и возобновления соответственно

Для очистки очереди, введите !p_clear

Для того, чтобы бот вышел из голосового чата, введите либо !stop, либо !leave, либо !dc.

##Детали реализации

Класс PeyokaBot задает начальный функционал бота, наследуется от discord.ext.commands.Bot

Класс Music реализует функционал бота, предназначенный для проигрывания музыки, наследуется от discord.ext.commands.Cog. 
Обрабатывает все команды, отправленные пользователем.

Класс GuildsToUrls задает структуру базы данных, хранящей очереди.

Класс Query предназначен для более простой обработки запросов, совмещает в себе методы для определения ссылки.
